$node-size: 4vh;
$node-hover-emphasis: 0.15vh;
$node-color: lightgrey;
$color-emphasis: 20%;
$node-regular-types:
  "inactive" white,
  "wall" black,
  "start" aquamarine,
  "end" aqua,
  "bridge" green;

$node-path-types:
  "visited" lightcoral,
  "taken" turquoise;

.graph-wrapper {
  display: flex;
  width: 100%;
  flex-wrap: wrap;
  justify-content: center;
  cursor: pointer;
}

.node-basics {
  box-sizing: border-box;
  background-clip: content-box;
  display: block;
  position: relative;
  width: $node-size;
  height: $node-size;
  border: 0.5px lightgrey solid;
}

@mixin node-color ($color: lightgrey) {
  background-color: $color;

  &:hover {
    background-color: darken($color, $color-emphasis);
  }
}

@mixin pop($type, $color) {
  animation: pop-#{$type} 0.25s 0s;
  @keyframes pop-#{$type} {
    0% {
      padding: 25%;
    }

    75% {
      padding: 0%;
      transform: scale(1.2);
      border: none;
      z-index: 1000;
    }

    100% {
      padding: 0%;
      transform: scale(1);
    }
  }
}

@mixin unpop($type, $color) {
  animation: unpop-#{$type} 0.5s ease 0s forwards;
  @keyframes unpop-#{$type} {
    0% {
      padding: 0%;
    }

    50% {
      padding: 25%;
    }

    100% {
      padding: 0%;
    }
  }
}
// TODO add radius. try starting the pop with it being circular, then going to square
@mixin search-pop($type, $color) {
  animation: search-pop-#{$type} 2s ease 0s forwards;
  @keyframes search-pop-#{$type} {
    0% {
      padding: 25%;
      background-color: lightyellow;
    }

    40% {
      padding: 0%;
      transform: scale(1.1);
      background-color: lighten($color: $color, $amount: $color-emphasis);
    }

    60% {
      padding: 0%;
      transform: scale(1);
    }

  }
}

@each $type, $color in $node-regular-types {
  .#{$type}-node {
    @extend .node-basics;
    @include node-color($color);
    @if $type != "inactive" {
      @include pop($type, $color);
    } @else {
      // TODO @include unpop($type, $color);
    }
  }
}

@each $type, $color in $node-path-types {
  .#{$type}-node {
    @extend .node-basics;
    background-color: $color;
    @include search-pop($type, $color);
  }
}
